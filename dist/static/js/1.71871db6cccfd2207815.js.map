{"version":3,"sources":["webpack:///src/components/disc/disc.vue","webpack:///./src/components/disc/disc.vue?2447","webpack:///./src/components/disc/disc.vue","webpack:///src/base/songlist/songlist.vue","webpack:///./src/base/songlist/songlist.vue?a738","webpack:///./src/base/songlist/songlist.vue","webpack:///src/components/music-list/music-list.vue","webpack:///./src/components/music-list/music-list.vue?0a08","webpack:///./src/components/music-list/music-list.vue","webpack:///./src/api/recommend.js"],"names":["disc","MusicList","music_list","_getSongList","computed","extends_default","dissname","imgurl","_this","this","songs","musicData","ret","disc_disc","render","_h","$createElement","_c","_self","attrs","name","title","bg-image","bgImage","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","songlist","Array","Boolean","album","index","songlist_songlist","_vm","staticClass","_l","song","key","on","click","$event","selectItem","directives","rawName","value","expression","class","getRankCls","domProps","textContent","_s","getRankText","_v","getDesc","base_songlist_songlist","transform","Object","dom","backdrop","mixin","Scroll","scroll_scroll","SongList","Loadding","loadding","String","miniTranslateY","methods","y","back","bottom","refresh","watch","newVal","imageHeight","percent","translateY","blur","RESERVED_HEIGHT","scale","zIndex","music_list_music_list","innerHTML","ref","style","length","randomPlayAll","data","listenScorll","listenScroll","probe-type","probeType","scroll","rank","select","music_list_Component","music_list_normalizeComponent","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_3__config__","platform","uin","needNewCode","__WEBPACK_IMPORTED_MODULE_2_common_js_jsonp__","hostUin","sin","ein","sortId","categoryId","rnd","Math","random","format","__WEBPACK_IMPORTED_MODULE_4_axios___default","a","get","params","then","res","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","disstid","type","json","utf8","onlysong"],"mappings":"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","file":"static/js/1.71871db6cccfd2207815.js","sourcesContent":["<template>\r\n  <transition name=\"slide\">\r\n      <music-list :title=\"title\" :bg-image=\"bgImage\" :songs=\"songs\"></music-list>\r\n  </transition>\r\n</template>\r\n<script>\r\nimport MusicList from 'components/music-list/music-list'\r\nimport { ERR_OK } from 'api/config'\r\nimport { mapGetters } from 'vuex'\r\nimport {getSongList} from 'api/recommend'\r\nimport { createSong, isValidMusic, processSongsUrl } from 'common/js/song'\r\nexport default {\r\n    name:'disc',\r\n        components:{\r\n            MusicList\r\n        },\r\n    created(){\r\n        this._getSongList()\r\n    },\r\n    data(){\r\n        return{\r\n            songs:[]\r\n        }\r\n    },\r\n  computed:{\r\n      title(){\r\n          return this.disc.dissname\r\n      },\r\n      bgImage(){\r\n          return this.disc.imgurl\r\n      },\r\n      ...mapGetters([\r\n          'disc'\r\n      ]),\r\n  },\r\n  methods:{\r\n      _getSongList(){\r\n        if (!this.disc.dissid) {\r\n          this.$router.push('/recommend')\r\n          return\r\n        }\r\n          getSongList(this.disc.dissid).then(res=>{\r\n              if(res.code === ERR_OK){\r\n            processSongsUrl(this._normalizeSongs(res.cdlist[0].songlist)).then((songs) => {\r\n              this.songs = songs\r\n            })\r\n              }\r\n          })\r\n      },\r\n            _normalizeSongs(list) {\r\n        let ret = []\r\n        list.forEach((musicData) => {\r\n          if (isValidMusic(musicData)) {\r\n            ret.push(createSong(musicData))\r\n          }\r\n        })\r\n        return ret\r\n      }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  .slide-enter-active, .slide-leave-active\r\n    transition: all 0.3s\r\n\r\n  .slide-enter, .slide-leave-to\r\n    transform: translate3d(100%, 0, 0)\r\n</style>    \r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/disc/disc.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"title\":_vm.title,\"bg-image\":_vm.bgImage,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a0a30af\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/disc/disc.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a0a30af\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./disc.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./disc.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./disc.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a0a30af\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./disc.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a0a30af\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/disc/disc.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"song-list\">\r\n    <ul>\r\n      <li @click=\"selectItem(song,index)\" class=\"item\" v-for=\"(song, index) in songs\" :key=\"index\">\r\n        <div class=\"rank\" v-show=\"rank\">\r\n          <span :class=\"getRankCls(index)\" v-text=\"getRankText(index)\"></span>\r\n        </div>\r\n        <div class=\"content\">\r\n          <h2 class=\"name\">{{song.name}}</h2>\r\n          <p class=\"desc\">{{getDesc(song)}}</p>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name:\"song-list\",\r\n  props:{\r\n      songs:{\r\n          type:Array,\r\n          default:[]\r\n      },\r\n      rank: {\r\n        type: Boolean,\r\n        default: false\r\n      }      \r\n  },\r\n  methods:{\r\n      getDesc(song){\r\n          return `${song.singer} ${song.album}`\r\n      },\r\n      selectItem(song,index){//告诉父组件,点击了的歌曲信息,和索引\r\n        this.$emit('select',song,index)\r\n      },\r\n      getRankCls(index) {\r\n        if (index <= 2) {\r\n          return `icon icon${index}`\r\n        } else {\r\n          return 'text'\r\n        }\r\n      },\r\n      getRankText(index) {\r\n        if (index > 2) {\r\n          return index + 1\r\n        }\r\n      }      \r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import \"~common/stylus/variable\"\r\n  @import \"~common/stylus/mixin\"\r\n  \r\n  .song-list\r\n    .item\r\n      display: flex\r\n      align-items: center\r\n      box-sizing: border-box\r\n      height: 64px\r\n      font-size: $font-size-medium\r\n      .rank\r\n        flex: 0 0 25px\r\n        width: 25px\r\n        margin-right: 30px\r\n        text-align: center\r\n        .icon\r\n          display: inline-block\r\n          width: 25px\r\n          height: 24px\r\n          background-size: 25px 24px\r\n          &.icon0\r\n            bg-image('first')\r\n          &.icon1\r\n            bg-image('second')\r\n          &.icon2\r\n            bg-image('third')\r\n        .text\r\n          color: $color-theme\r\n          font-size: $font-size-large\r\n      .content\r\n        flex: 1\r\n        line-height: 20px\r\n        overflow: hidden\r\n        .name\r\n          no-wrap()\r\n          color: $color-text\r\n        .desc\r\n          no-wrap()\r\n          margin-top: 4px\r\n          color: $color-text-d\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/base/songlist/songlist.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song-list\"},[_c('ul',_vm._l((_vm.songs),function(song,index){return _c('li',{key:index,staticClass:\"item\",on:{\"click\":function($event){_vm.selectItem(song,index)}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rank),expression:\"rank\"}],staticClass:\"rank\"},[_c('span',{class:_vm.getRankCls(index),domProps:{\"textContent\":_vm._s(_vm.getRankText(index))}})]),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(song.name))]),_vm._v(\" \"),_c('p',{staticClass:\"desc\"},[_vm._v(_vm._s(_vm.getDesc(song)))])])])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-059e9adb\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/songlist/songlist.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-059e9adb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./songlist.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./songlist.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./songlist.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-059e9adb\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./songlist.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-059e9adb\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/songlist/songlist.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"music-list\">\r\n      <div class=\"back\" @click='back'>\r\n          <i class=\"icon-back\"></i>\r\n      </div>\r\n      <h1 class=\"title\" v-html=\"title\"></h1>\r\n      <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n          <div class=\"play-wrapper\">\r\n              <div class=\"play\" ref='playBtn'>\r\n                  <i class=\"icon-play\" v-show=\"songs.length>0\"></i>\r\n                  <span class=\"text\" @click=\"randomPlayAll\">随机播放全部</span>\r\n              </div>\r\n          </div>\r\n          <div class=\"filter\" ref='filter'></div>\r\n      </div>\r\n      <div class=\"bg-layer\" ref=\"layer\"></div>\r\n      <!-- 监听scroll事件给bg-layer赋值,让它在Y方向偏移处于list上方的位置形成向上滑动的效果 -->\r\n      <scroll :data=\"songs\" class=\"list\" @scroll=\"scroll\" \r\n      ref=\"list\" :listenScorll=\"listenScroll\" :probe-type=\"probeType\"> \r\n          <div class=\"song-list-wrapper\">\r\n          <song-list :songs=\"songs\" @select=\"selectItem\" :rank=\"rank\"></song-list>\r\n          </div>\r\n          <div class=\"loading-container\" v-show=\"!songs.length\">\r\n              <loadding></loadding>\r\n          </div>\r\n      </scroll>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Scroll from 'base/scroll/scroll'\r\nimport SongList from 'base/songlist/songlist'\r\nimport Loadding from 'base/loadding/loadding'\r\nimport {prefix} from 'common/js/dom'\r\nimport {mapActions} from 'vuex'\r\nimport {playListMixin} from 'common/js/mixin'\r\nconst transform = prefix('transform')\r\nconst backdrop = prefix('backdrop-filter')\r\nconst RESERVED_HEIGHT = 40//保留高度\r\nexport default {\r\n  name:\"music-list\",\r\n  mixins:[playListMixin],\r\n  components:{\r\n      Scroll,\r\n      SongList,\r\n      Loadding\r\n  },\r\n  props:{\r\n      title:{\r\n          type:String,\r\n          default:''\r\n      },\r\n      songs:{\r\n          type:Array,\r\n          default:[]\r\n      },\r\n      bgImage:{\r\n          type:String,\r\n          default:''\r\n      },\r\n      rank:{\r\n          type:Boolean,\r\n          default:false\r\n      }\r\n  },\r\n  data() {\r\n      return {\r\n        scrollY: 0\r\n      }\r\n  },\r\n  computed:{\r\n      bgStyle(){\r\n          return `background-image:url(${this.bgImage})`          \r\n      },\r\n  },\r\n  mounted(){//refs.list 是一个组件所以要丶el获取元素.\r\n      this.imageHeight =  this.$refs.bgImage.clientHeight //记录图片高\r\n      this.miniTranslateY =   -this.imageHeight + RESERVED_HEIGHT \r\n      console.log(this.miniTranslateY)\r\n      //Y正方向上最小的偏移值\r\n      this.$refs.list.$el.style.top = this.imageHeight + 'px'\r\n      //让滚动组件距离和图片错开\r\n  },\r\n  created(){\r\n      this.listenScroll = true\r\n      this.probeType = 3 \r\n  },\r\n  methods:{\r\n      scroll(pos){//监听了scroll的值\r\n        this.scrollY = pos.y\r\n      },\r\n      back(){//路由回退\r\n          this.$router.back()\r\n      },\r\n      selectItem(song,index){\r\n          this.selectPlay({\r\n              list:this.songs,\r\n              index:index\r\n          })\r\n      },\r\n      randomPlayAll(){\r\n       this.randomPlay({\r\n           list:this.songs\r\n       })\r\n      },\r\n      handlePlayList(){//利用mixin方法,复用一些组件方法,适配播放器底部距离\r\n       const bottom= this.playList.length > 0 ? '60px' :''\r\n       this.$refs.list.$el.style.bottom = bottom\r\n       this.$refs.list.refresh()\r\n      },\r\n      ...mapActions([\r\n          'selectPlay',\r\n          'randomPlay'\r\n      ])\r\n  },\r\nwatch:{\r\n      scrollY(newVal){ //watch实时监听scrollY方向的新值\r\n        let translateY = Math.max(this.miniTranslateY, newVal)\r\n        let scale = 1\r\n        let zIndex = 0\r\n        let blur = 0\r\n        const percent = Math.abs(newVal / this.imageHeight)\r\n          //因为下拉时newVal 增加.要形成无缝放大的效果需要除以图片高度,算出比例\r\n          if(newVal >0){\r\n              scale = 1+percent\r\n              zIndex = 10\r\n          }else{\r\n             blur = Math.min(20 * percent*20)\r\n          }\r\n        this.$refs.layer.style['transform'] = `translate3d(0,${translateY}px,0)`\r\n        this.$refs.filter.style[backdrop] = `blur(${blur}px)`\r\n          if (newVal < this.miniTranslateY) {\r\n        //如果Scroll元素 Y正方向的偏移量 达到图片位置,(越向上越小)\r\n          zIndex = 10\r\n          this.$refs.bgImage.style.paddingTop = 0\r\n          this.$refs.bgImage.style.height = `${RESERVED_HEIGHT}px`\r\n          this.$refs.playBtn.style.display = 'none'\r\n        } else {\r\n          this.$refs.bgImage.style.paddingTop = '70%'\r\n          this.$refs.bgImage.style.height = 0\r\n          this.$refs.playBtn.style.display = ''\r\n        }\r\n        this.$refs.bgImage.style[transform] = `scale(${scale})`\r\n        this.$refs.bgImage.style.zIndex = zIndex\r\n      }\r\n      }\r\n  }\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  @import \"~common/stylus/variable\"\r\n  @import \"~common/stylus/mixin\"\r\n\r\n  .music-list\r\n    position: fixed\r\n    z-index: 100\r\n    top: 0\r\n    left: 0\r\n    bottom: 0\r\n    right: 0\r\n    background: $color-background\r\n    .back\r\n      position absolute\r\n      top: 0\r\n      left: 6px\r\n      z-index: 50\r\n      .icon-back\r\n        display: block\r\n        padding: 10px\r\n        font-size: $font-size-large-x\r\n        color: $color-theme\r\n    .title\r\n      position: absolute\r\n      top: 0\r\n      left: 10%\r\n      z-index: 40\r\n      width: 80%\r\n      no-wrap()\r\n      text-align: center\r\n      line-height: 40px\r\n      font-size: $font-size-large\r\n      color: $color-text\r\n    .bg-image\r\n      position: relative\r\n      width: 100%\r\n      height: 0\r\n      padding-top: 70%\r\n      transform-origin: top\r\n      background-size: cover\r\n      .play-wrapper\r\n        position: absolute\r\n        bottom: 20px\r\n        z-index: 50\r\n        width: 100%\r\n        .play\r\n          box-sizing: border-box\r\n          width: 135px\r\n          padding: 7px 0\r\n          margin: 0 auto\r\n          text-align: center\r\n          border: 1px solid $color-theme\r\n          color: $color-theme\r\n          border-radius: 100px\r\n          font-size: 0\r\n          .icon-play\r\n            display: inline-block\r\n            vertical-align: middle\r\n            margin-right: 6px\r\n            font-size: $font-size-medium-x\r\n          .text\r\n            display: inline-block\r\n            vertical-align: middle\r\n            font-size: $font-size-small\r\n      .filter\r\n        position: absolute\r\n        top: 0\r\n        left: 0\r\n        width: 100%\r\n        height: 100%\r\n        background: rgba(7, 17, 27, 0.4)\r\n    .bg-layer\r\n      position: relative\r\n      height: 100%\r\n      background: $color-background\r\n    .list\r\n      position: absolute\r\n      top: 0\r\n      bottom: 0\r\n      width: 100%\r\n      background: $color-background\r\n      .song-list-wrapper\r\n        padding: 20px 30px\r\n      .loading-container\r\n        position: absolute\r\n        width: 100%\r\n        top: 50%\r\n        transform: translateY(-50%)\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/music-list/music-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_vm._v(\" \"),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_vm._v(\" \"),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{ref:\"playBtn\",staticClass:\"play\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length>0),expression:\"songs.length>0\"}],staticClass:\"icon-play\"}),_vm._v(\" \"),_c('span',{staticClass:\"text\",on:{\"click\":_vm.randomPlayAll}},[_vm._v(\"随机播放全部\")])])]),_vm._v(\" \"),_c('div',{ref:\"filter\",staticClass:\"filter\"})]),_vm._v(\" \"),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_vm._v(\" \"),_c('scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"data\":_vm.songs,\"listenScorll\":_vm.listenScroll,\"probe-type\":_vm.probeType},on:{\"scroll\":_vm.scroll}},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"select\":_vm.selectItem}})],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length),expression:\"!songs.length\"}],staticClass:\"loading-container\"},[_c('loadding')],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f29fa8f6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/music-list/music-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f29fa8f6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./music-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./music-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./music-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f29fa8f6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./music-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f29fa8f6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/music-list/music-list.vue\n// module id = null\n// module chunks = ","import jsonp from 'common/js/jsonp'\r\nimport {commonParams,options} from './config'\r\nimport axios from 'axios'\r\nconst debug = process.env.NODE_ENV !== 'production'\r\nexport function getRecommend(){\r\n    const url = 'https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg'\r\n    const data = Object.assign({}, commonParams, {\r\n        platform: 'h5',\r\n        uin: 0,\r\n        needNewCode: 1\r\n      })\r\n      return jsonp(url, data, options)\r\n}\r\nexport function getDiscList(){\r\n  const url = 'http://ustbhuangyi.com/music/api/getDiscList'\r\n    const data = Object.assign({}, commonParams, {\r\n        platform: 'yqq',\r\n        hostUin: 0,\r\n        sin: 0,\r\n        ein: 29,\r\n        sortId: 5,\r\n        needNewCode: 0,\r\n        categoryId: 10000000,\r\n        rnd: Math.random(),\r\n        format: 'json'\r\n      })\r\n      return axios.get(url, {\r\n        params: data\r\n      }).then((res) => {\r\n        return Promise.resolve(res.data)\r\n      })\r\n}\r\n\r\nexport function getSongList(disstid) {\r\n  const url = 'http://ustbhuangyi.com/music/api/getCdInfo'\r\n\r\n  const data = Object.assign({}, commonParams, {\r\n    disstid,\r\n    type: 1,\r\n    json: 1,\r\n    utf8: 1,\r\n    onlysong: 0,\r\n    platform: 'yqq',\r\n    hostUin: 0,\r\n    needNewCode: 0\r\n  })\r\n\r\n  return axios.get(url, {\r\n    params: data\r\n  }).then((res) => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/recommend.js"],"sourceRoot":""}