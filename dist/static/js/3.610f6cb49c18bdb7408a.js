webpackJsonp([3],{IuFR:function(e,t){},YOyO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("Dd8w"),n=s.n(r),a={props:{title:{type:String,default:""}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"no-result"},[t("p",{staticClass:"no-result-text"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var o=s("VU/8")(a,i,!1,function(e){s("q7xr")},"data-v-741e8ab0",null).exports,c=s("qwAB"),u=s("fqe1"),l=s("NYxO"),h=s("PvFA"),f=s("woOf"),d=s.n(f),p=s("Gak4"),v=s("T452");function g(e,t,s,r){var n=d()({},v.b,{w:e,p:t,perpage:r,n:r,catZhida:s?1:0,zhidaqu:1,t:0,flag:1,ie:"utf-8",sem:1,aggr:0,remoteplace:"txt.mqq.all",uin:0,needNewCode:1,platform:"h5"});return Object(p.a)("https://c.y.qq.com/soso/fcgi-bin/search_for_qq_cp",n,v.c)}var m={data:function(){return{page:1,result:[],hasMore:!0,pullUp:!0,beforeScroll:!0}},components:{Scroll:c.a,Loadding:u.a,noResult:o},props:{query:{type:String,default:""},showSinger:{type:Boolean,default:!1}},watch:{query:function(e){this._search()}},methods:n()({_search:function(){var e=this;this.page=1,this.hasMore=!0,this.$refs.suggest.scrollTo(0,0),g(this.query,this.page,this.showSinger,20).then(function(t){t.code===v.a&&e.getResult(t.data).then(function(t){e.result=t}),e.checkMore(t.data.song)})},getResult:function(e){var t=[];return Object(h.c)(this._normalizeSongs(e.song.list)).then(function(e){return t=t.concat(e)})},getSongName:function(e){return e.name+"-"+e.singer},_normalizeSongs:function(e){var t=[];return e.forEach(function(e){Object(h.b)(e)&&t.push(Object(h.a)(e))}),t},listScroll:function(){this.$emit("listScroll")},checkMore:function(e){var t=e;(0===t.list.length||t.curnum+20*(t.curpage-1)>=t.totalnum)&&(this.hasMore=!1)},searchMore:function(){var e=this;this.hasMore&&(this.page++,g(this.query,this.page,this.showSinger,20).then(function(t){t.code===v.a&&e.getResult(t.data).then(function(t){e.result=e.result.concat(t)}),e.checkMore(t.data.song)}))},selectItem:function(e){this.insertSong(e)}},Object(l.b)(["insertSong"]))},y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("scroll",{ref:"suggest",staticClass:"suggest",attrs:{data:e.result,pullup:e.pullUp,beforeScroll:e.beforeScroll},on:{scrollToEnd:e.searchMore,beforeScroll:e.listScroll}},[s("ul",{staticClass:"suggest-list"},[e._l(e.result,function(t,r){return s("li",{key:r,staticClass:"suggest-item",on:{click:function(s){e.selectItem(t)}}},[s("div",{staticClass:"icon"},[s("i",{staticClass:"icon-music"})]),e._v(" "),s("div",{staticClass:"name"},[s("p",{staticClass:"text",domProps:{innerHTML:e._s(e.getSongName(t))}})])])}),e._v(" "),s("loadding",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}]})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasMore&&!e.result.length,expression:"!hasMore && !result.length"}],staticClass:"no-result-wrapper"},[s("no-result",{attrs:{title:"抱歉，暂无搜索结果"}})],1)])},staticRenderFns:[]};var q=s("VU/8")(m,y,!1,function(e){s("IuFR")},"data-v-50f80c93",null).exports,_=s("hhm8"),b={props:{placeholder:{type:String,default:"搜索歌曲"}},created:function(){var e=this;this.$watch("query",Object(_.a)(function(t){e.$emit("query",t)},400))},data:function(){return{query:""}},methods:{clear:function(){this.query=""},setQuery:function(e){this.query=e},blur:function(){this.$refs.query.blur()}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-box"},[s("i",{staticClass:"icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"query",staticClass:"box",attrs:{placeholder:e.placeholder},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"icon-dismiss",on:{click:e.clear}})])},staticRenderFns:[]};var C={data:function(){return{hotKey:[],query:""}},created:function(){this._getHotKey()},methods:{onQueryChange:function(e){this.query=e},addQuery:function(e){this.$refs.searchBox.setQuery(e)},_getHotKey:function(){var e,t=this;(e=d()({},v.b,{uin:0,needNewCode:1,platform:"h5"}),Object(p.a)("https://c.y.qq.com/splcloud/fcgi-bin/gethotkey.fcg",e,v.c)).then(function(e){e.code===v.a&&(t.hotKey=e.data.hotkey.slice(0,10))})},blurInput:function(){this.$refs.searchBox.blur()}},components:{SearchBox:s("VU/8")(b,w,!1,function(e){s("eYO9")},"data-v-0bab4c53",null).exports,Suggest:q}},x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box-wrapper"},[s("search-box",{ref:"searchBox",on:{query:e.onQueryChange}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],staticClass:"shortcut-wrapper"},[s("div",{staticClass:"shortcut"},[s("div",{staticClass:"hot-key"},[s("h1",{staticClass:"title"},[e._v("大家都在搜")]),e._v(" "),s("ul",e._l(e.hotKey,function(t,r){return s("li",{key:r,staticClass:"item",on:{click:function(s){e.addQuery(t.k)}}},[s("span",[e._v(e._s(t.k))])])}))])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"search-result"},[s("suggest",{attrs:{query:e.query},on:{listScroll:e.blurInput}})],1)])},staticRenderFns:[]};var S=s("VU/8")(C,x,!1,function(e){s("jhOk")},"data-v-17394b5d",null);t.default=S.exports},eYO9:function(e,t){},jhOk:function(e,t){},q7xr:function(e,t){}});
//# sourceMappingURL=3.610f6cb49c18bdb7408a.js.map